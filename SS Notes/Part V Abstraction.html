<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Part V Abstraction</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="github-pandoc.css" />
</head>
<body>
<header>
<h1 class="title">Part V Abstraction</h1>
</header>
<p><strong>What are the two kinds of abstraction specified in this part?</strong></p>
<ul>
<li>data abstraction</li>
<li>the implementation of higher-order functions</li>
</ul>
<h2 id="chapter-17-lists">Chapter 17 Lists</h2>
<p><strong>How to use list to define an icecream menu?</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb1-1" title="1">(vanilla (ultra chocolate) (heath bar crunch) ginger (cherry garcia))</a></code></pre></div>
<p>This is meant to represent five flavors, two of which are named by single words, and the other three of which are named by sentences.</p>
<p>The data structure we’re using in this example is called a <strong><em>list</em></strong>.</p>
<p><strong>What are the differnces between a sentence and a list?</strong></p>
<table>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">lists</th>
<th style="text-align: center;">sentences</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>elements</strong></td>
<td style="text-align: center;">anything</td>
<td style="text-align: center;">words</td>
</tr>
<tr class="even">
<td><strong>definition</strong></td>
<td style="text-align: center;">sefl-referential</td>
<td style="text-align: center;">non-self-referential</td>
</tr>
</tbody>
</table>
<p>A list that’s an element of another list is called a <strong><em>sublist</em></strong>. We’ll use the name <strong><em>structured</em></strong> list for a list that includes sublists.</p>
<p><strong>How to use lists in pattern matcher?</strong></p>
<p>We used list structure to hold known-values databases, such as</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb2-1" title="1">((FRONT (YOUR MOTHER)) (BACK (SHOULD KNOW)))</a></code></pre></div>
<p><em>Lists are at the core of what Lisp has been about from its beginning. (In fact the name “Lisp” stands for “LISt Processing.”)</em></p>
<hr />
<h3 id="selectors-and-constructors">Selectors and Constructors</h3>
<p><strong>What are the <em>selectors</em> of lists?</strong></p>
<ul>
<li><code>car</code> – to select the first element of a list.</li>
<li><code>cdr</code> – to select the portion of a list containing all but the first element.</li>
</ul>
<p><strong>What is the <em>predicate</em> function to check for an empty list?</strong></p>
<ul>
<li><code>null?</code> – returns <code>#t</code> for the empty list, <code>#f</code> for anything else.</li>
</ul>
<p><strong>What are the <em>constructors</em> for lists?</strong></p>
<ul>
<li><code>list</code> – takes any number of arguments and returns a list with those arguments as its elements.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb3-1" title="1">(<span class="kw">list</span> (<span class="op">+</span> <span class="dv">2</span> <span class="dv">3</span>) &#39;squash (<span class="op">=</span> <span class="dv">2</span> <span class="dv">2</span>) (<span class="kw">list</span> <span class="dv">4</span> <span class="dv">5</span>) <span class="kw">remainder</span> &#39;zucchini)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">;(5 SQUASH #T (4 5) #&lt;PROCEDURE&gt; ZUCCHINI)</span></a></code></pre></div>
<p><img src="images/list.png" width="400"></p>
<ul>
<li><code>cons</code> – takes two arguments, an element and a list and returns a new list whose <code>car</code> is the first argument and whose <code>cdr</code> is the second.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb4-1" title="1">(<span class="kw">cons</span> &#39;for &#39;(no one))</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">; (FOR NO ONE)</span></a></code></pre></div>
<p><img src="images/cons.png" width="400"></p>
<ul>
<li><code>append</code> – combines the elements of two or more lists into a larger list.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb5-1" title="1">(<span class="kw">append</span> &#39;(get back) &#39;(the word))</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">; (GET BACK THE WORD)</span></a></code></pre></div>
<p><img src="images/append.png" width="400"></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb6-1" title="1">(<span class="kw">list</span> &#39;(i am) &#39;(the walrus))</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">; ((I AM) (THE WALRUS))</span></a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4">(<span class="kw">cons</span> &#39;(i am) &#39;(the walrus))</a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">; ((I AM) THE WALRUS)</span></a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7">(<span class="kw">append</span> &#39;(i am) &#39;(the walrus))</a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">; (I AM THE WALRUS)</span></a></code></pre></div>
<hr />
<h3 id="programming-with-lists">Programming with Lists</h3>
<p><strong>How to define <code>praise</code> flavors function with <code>cons</code>?</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb7-1" title="1">(<span class="ex">define</span><span class="fu"> </span>(praise flavors)</a>
<a class="sourceLine" id="cb7-2" title="2">  (<span class="kw">if</span> (<span class="kw">null?</span> flavors)                         <span class="co">; if flavors is empty</span></a>
<a class="sourceLine" id="cb7-3" title="3">      &#39;()                                       <span class="co">; return &#39;()</span></a>
<a class="sourceLine" id="cb7-4" title="4">      (<span class="kw">cons</span> (se (<span class="kw">car</span> flavors) &#39;(is delicious))  <span class="co">; or invoke recursive calls</span></a>
<a class="sourceLine" id="cb7-5" title="5">            (praise (<span class="kw">cdr</span> flavors)))))</a>
<a class="sourceLine" id="cb7-6" title="6"></a>
<a class="sourceLine" id="cb7-7" title="7">(praise &#39;(ginger (ultra chocolate) lychee (rum raisin)))</a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">; ((GINGER IS DELICIOUS) (ULTRA CHOCOLATE IS DELICIOUS)</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">;  (LYCHEE IS DELICIOUS) (RUM RAISIN IS DELICIOUS))</span></a></code></pre></div>
<p><strong>How to define a En-Fr <code>translate</code> function with <code>car</code> and <code>cdr</code>?</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb8-1" title="1"></a>
<a class="sourceLine" id="cb8-2" title="2">(<span class="ex">define</span><span class="fu"> </span>(translate wd)</a>
<a class="sourceLine" id="cb8-3" title="3">  (lookup wd &#39;((window fenetre) (book livre) (computer ordinateur) <span class="co">; Invoke function lookup</span></a>
<a class="sourceLine" id="cb8-4" title="4">              (house maison) (closed ferme) (pate pate) (liver foie) <span class="co">; define dictionary</span></a>
<a class="sourceLine" id="cb8-5" title="5">              (faith foi) (weekend (fin de semaine))</a>
<a class="sourceLine" id="cb8-6" title="6">              ((practical joke) attrape) (pal copain))))</a>
<a class="sourceLine" id="cb8-7" title="7"></a>
<a class="sourceLine" id="cb8-8" title="8">(<span class="ex">define</span><span class="fu"> </span>(lookup wd dictionary)</a>
<a class="sourceLine" id="cb8-9" title="9">  (<span class="kw">cond</span> ((<span class="kw">null?</span> dictionary) &#39;(parlez-vous anglais?)) <span class="co">; when dic is empty, return a sentence</span></a>
<a class="sourceLine" id="cb8-10" title="10">        ((<span class="kw">equal?</span> wd (<span class="kw">car</span> (<span class="kw">car</span> dictionary))) <span class="co">; when wd is equal to the car of car of dic</span></a>
<a class="sourceLine" id="cb8-11" title="11">         (<span class="kw">car</span> (<span class="kw">cdr</span> (<span class="kw">car</span> dictionary)))) <span class="co">; return car of cdr of car of dic</span></a>
<a class="sourceLine" id="cb8-12" title="12">        (<span class="kw">else</span> (lookup wd (<span class="kw">cdr</span> dictionary))))) <span class="co">; else invoke recursive call with cdr of dic</span></a>
<a class="sourceLine" id="cb8-13" title="13"></a>
<a class="sourceLine" id="cb8-14" title="14">(translate &#39;computer)</a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co">; ORDINATEUR</span></a>
<a class="sourceLine" id="cb8-16" title="16"></a>
<a class="sourceLine" id="cb8-17" title="17">(translate &#39;(practical joke))</a>
<a class="sourceLine" id="cb8-18" title="18"><span class="co">; ATTRAPE</span></a>
<a class="sourceLine" id="cb8-19" title="19"></a>
<a class="sourceLine" id="cb8-20" title="20">(translate &#39;recursion)</a>
<a class="sourceLine" id="cb8-21" title="21"><span class="co">; (PARLEZ-VOUS ANGLAIS?)</span></a></code></pre></div>
<p><strong>What is the shorthand for <code>car</code> and <code>cdr</code> in scheme?</strong></p>
<p><code>car</code> = <code>a</code> <code>cdr</code> = <code>d</code></p>
<p>And wrap <code>a</code> and <code>d</code> between <code>c</code> and <code>r</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb9-1" title="1">(<span class="kw">car</span> (<span class="kw">cdr</span> (<span class="kw">car</span> dictionary)))</a></code></pre></div>
<p>can be writtern in</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb10-1" title="1">(<span class="kw">cadar</span> dictionary)</a></code></pre></div>
<p>The most commonly used of these abbreviations are <code>cadr</code> , which selects the second element of a list; <code>caddr</code> , which selects the third element; and <code>cadddr</code> , which selects the fourth.</p>
<hr />
<h3 id="the-truth-about-sentences">The Truth about Sentences</h3>
<p><strong>What are sentences?</strong></p>
<p><em>Sentences are lists.</em> Sentences are an abstract data type represented by lists. We created the sentence ADT by writing special selectors and constructors that provide a different way of using the same underlying machinery—a different interface, a different metaphor, a different point of view.</p>
<p><strong>What are the three differences between sentences and lists?</strong></p>
<ul>
<li>A sentence can contain only words, not sublists.</li>
<li>Sentence selectors are symmetrical front-to-back.</li>
<li>Sentences and words have the same selectors.</li>
</ul>
<p>From Scheme’s ordinary point of view, an English sentence is just one particular case of a much more general data structure, whereas a <em>symbol</em> is something entirely different.</p>
<blockquote>
<p>As we said in Chapter 5, “symbol” is the official name for words that are neither strings nor numbers.</p>
</blockquote>
<p><strong>How to define <code>first</code> <code>last</code> <code>butfirst</code> <code>butlast</code> for sentences with Scheme list selectors?</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb11-1" title="1">(<span class="ex">define</span><span class="fu"> </span>(first sent)</a>
<a class="sourceLine" id="cb11-2" title="2">  (<span class="kw">car</span> sent))</a>
<a class="sourceLine" id="cb11-3" title="3"></a>
<a class="sourceLine" id="cb11-4" title="4">(<span class="ex">define</span><span class="fu"> </span>(last sent)</a>
<a class="sourceLine" id="cb11-5" title="5">  (<span class="kw">if</span> (<span class="kw">null?</span> (<span class="kw">cdr</span> sent))  <span class="co">; if the sent is null but the first element</span></a>
<a class="sourceLine" id="cb11-6" title="6">      (<span class="kw">car</span> sent)          <span class="co">; return the first element of the sent</span></a>
<a class="sourceLine" id="cb11-7" title="7">      (last (<span class="kw">cdr</span> sent)))) <span class="co">; or invoke the recursive call</span></a>
<a class="sourceLine" id="cb11-8" title="8"></a>
<a class="sourceLine" id="cb11-9" title="9">(<span class="ex">define</span><span class="fu"> </span>(butfirst sent)</a>
<a class="sourceLine" id="cb11-10" title="10">  (<span class="kw">cdr</span> sent))</a>
<a class="sourceLine" id="cb11-11" title="11"></a>
<a class="sourceLine" id="cb11-12" title="12">(<span class="ex">define</span><span class="fu"> </span>(butlast sent)</a>
<a class="sourceLine" id="cb11-13" title="13">  (<span class="kw">if</span> (<span class="kw">null?</span> (<span class="kw">cdr</span> sent))  <span class="co">; if the sent is null but the first element</span></a>
<a class="sourceLine" id="cb11-14" title="14">      &#39;()                 <span class="co">; return &#39;()</span></a>
<a class="sourceLine" id="cb11-15" title="15">      (<span class="kw">cons</span> (<span class="kw">car</span> sent) (butlast (<span class="kw">cdr</span> sent))))) <span class="co">; or add the first element to result</span></a></code></pre></div>
<hr />
<h3 id="higher-order-functions">Higher-Order Functions</h3>
<p><strong>What are the official list versions of <code>every</code> <code>keep</code> and <code>accumulate</code>?</strong></p>
<p><code>map</code> <code>filter</code> and <code>reduce</code></p>
<p><strong>How does <code>map</code> work?</strong></p>
<p><code>map</code> takes two arguments, a function and a list, and returns a list containing the result of applying the function to each element of the list.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb12-1" title="1">(map square &#39;(<span class="dv">9</span> <span class="dv">8</span> <span class="dv">7</span> <span class="dv">6</span>))</a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co">; (81 64 49 36)</span></a>
<a class="sourceLine" id="cb12-3" title="3"></a>
<a class="sourceLine" id="cb12-4" title="4">(map (<span class="kw">lambda</span> (x) (se x x)) &#39;(rocky raccoon))</a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co">; ((ROCKY ROCKY) (RACCOON RACCOON))</span></a>
<a class="sourceLine" id="cb12-6" title="6"></a>
<a class="sourceLine" id="cb12-7" title="7">(every (<span class="kw">lambda</span> (x) (se x x)) &#39;(rocky raccoon))</a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">; (ROCKY ROCKY RACCOON RACCOON)</span></a>
<a class="sourceLine" id="cb12-9" title="9"></a>
<a class="sourceLine" id="cb12-10" title="10">(map <span class="kw">car</span> &#39;((john lennon) (paul mccartney)</a>
<a class="sourceLine" id="cb12-11" title="11">           (george harrison) (ringo starr)))</a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">; (JOHN PAUL GEORGE RINGO)</span></a>
<a class="sourceLine" id="cb12-13" title="13"></a>
<a class="sourceLine" id="cb12-14" title="14">(map <span class="kw">even?</span> &#39;(<span class="dv">9</span> <span class="dv">8</span> <span class="dv">7</span> <span class="dv">6</span>))</a>
<a class="sourceLine" id="cb12-15" title="15"><span class="co">; (#F #T #F #T)</span></a>
<a class="sourceLine" id="cb12-16" title="16"></a>
<a class="sourceLine" id="cb12-17" title="17">(map (<span class="kw">lambda</span> (x) (word x x)) &#39;rain)     <span class="co">; &#39;rain is not a list</span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="co">; ERROR -- INVALID ARGUMENT TO MAP: RAIN</span></a></code></pre></div>
<blockquote>
<p><strong>Where is the name <code>map</code> from?</strong></p>
</blockquote>
<blockquote>
<p>The word “map” may seem strange for this function, but it comes from the mathematical study of functions, in which they talk about a mapping of the domain into the range. In this terminology, one talks about “mapping a function over a set” (a set of argument values, that is), and Lispians have taken over the same vocabulary, except that we talk about mapping over lists instead of mapping over sets.</p>
</blockquote>
<p><strong>How does <code>filter</code> work?</strong></p>
<p><code>filter</code> also takes a function and a list as arguments; it returns a list containing only those elements of the argument list for which the function returns a true value. This is the same as <code>keep</code>, except that the elements of the argument list may be sublists, and their structure is preserved in the result.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb13-1" title="1">(filter (<span class="kw">lambda</span> (flavor) (member? &#39;swirl flavor))</a>
<a class="sourceLine" id="cb13-2" title="2">        &#39;((rum raisin) (root beer swirl) (rocky road) (fudge swirl)))</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">; ((ROOT BEER SWIRL) (FUDGE SWIRL))</span></a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5">(filter word? &#39;((ultra chocolate) ginger lychee (raspberry sherbet)))</a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">; (GINGER LYCHEE)</span></a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8">(filter (<span class="kw">lambda</span> (nums) (<span class="op">=</span> (<span class="kw">car</span> nums) (<span class="kw">cadr</span> nums)))</a>
<a class="sourceLine" id="cb13-9" title="9">        &#39;((<span class="dv">2</span> <span class="dv">3</span>) (<span class="dv">4</span> <span class="dv">4</span>) (<span class="dv">5</span> <span class="dv">6</span>) (<span class="dv">7</span> <span class="dv">8</span>) (<span class="dv">9</span> <span class="dv">9</span>)))</a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">; ((4 4) (9 9))</span></a></code></pre></div>
<p><code>filter</code> is not a standard Scheme primitive, but it’s a universal convention; everyone defines it the same way we do.</p>
<p><strong>How does <code>reduce</code> work?</strong></p>
<p><code>reduce</code> is just like <code>accumulate</code> except that it works only on lists, not on words. Neither is a built-in Scheme primitive; both names are seen in the literature. (The name “reduce” is official in the languages APL and Common Lisp, which do include this higher-order function as a primitive.)</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb14-1" title="1">(reduce * &#39;(<span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>))</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="co">; 120</span></a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4">(reduce (<span class="kw">lambda</span> (list1 list2) (<span class="kw">list</span> (<span class="op">+</span> (<span class="kw">car</span> list1) (<span class="kw">car</span> list2))</a>
<a class="sourceLine" id="cb14-5" title="5">                                    (<span class="op">+</span> (<span class="kw">cadr</span> list1) (<span class="kw">cadr</span> list2))))</a>
<a class="sourceLine" id="cb14-6" title="6">        &#39;((<span class="dv">1</span> <span class="dv">2</span>) (<span class="dv">30</span> <span class="dv">40</span>) (<span class="dv">500</span> <span class="dv">600</span>)))</a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">; (531 642)</span></a></code></pre></div>
<hr />
<h3 id="other-primitives-for-lists">Other Primitives for Lists</h3>
<ul>
<li><code>list?</code> – returns <code>#t</code> if its argument is a list, <code>#f</code> otherwise.</li>
<li><code>equal?</code></li>
<li><code>member</code> – like <code>member?</code> except for two differences: Its second argument must be a list (but can be a structured list); and instead of returning #t it returns the portion of the argument list starting with the element equal to the first argument.</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb15-1" title="1">(<span class="kw">member</span> &#39;d &#39;(a b c d e f g))</a>
<a class="sourceLine" id="cb15-2" title="2"><span class="co">; (D E F G)</span></a>
<a class="sourceLine" id="cb15-3" title="3"></a>
<a class="sourceLine" id="cb15-4" title="4">(<span class="kw">member</span> &#39;h &#39;(a b c d e f g))</a>
<a class="sourceLine" id="cb15-5" title="5"><span class="co">; #F</span></a></code></pre></div>
<p>This is the main example in Scheme of the <em>semipredicate</em> idea that we mentioned earlier in passing. It doesn’t have a question mark in its name because it returns values other than #t and #f , but it works as a predicate because any non-#f value is considered true.</p>
<ul>
<li><code>list-ref</code> – like <code>item</code> execpt it counts items from zero instead of from one and takes its arguments in the other order:</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb16-1" title="1">(<span class="kw">list-ref</span> ’(happiness is a warm gun) <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="co">; WARM</span></a></code></pre></div>
<ul>
<li><code>length</code> – the same with <code>count</code> except that it doesn’t work on words.</li>
</ul>
<hr />
<h3 id="association-lists">Association Lists</h3>
<p><strong>What is an association list?</strong></p>
<p>A list of names and corresponding values is called an <em>association list</em>, or an <em>a-list</em>.</p>
<p><strong>How to look up a name in an a-list?</strong></p>
<p>The Scheme primitive <code>assoc</code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb17-1" title="1">(<span class="kw">assoc</span> &#39;george</a>
<a class="sourceLine" id="cb17-2" title="2">       &#39;((john lennon) (paul mccartney)</a>
<a class="sourceLine" id="cb17-3" title="3">         (george harrison) (ringo starr)))</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">; (GEORGE HARRISON)</span></a>
<a class="sourceLine" id="cb17-5" title="5"></a>
<a class="sourceLine" id="cb17-6" title="6">(<span class="kw">assoc</span> &#39;x &#39;((i <span class="dv">1</span>) (v <span class="dv">5</span>) (x <span class="dv">10</span>) (l <span class="dv">50</span>) (c <span class="dv">100</span>) (d <span class="dv">500</span>) (m <span class="dv">1000</span>)))</a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co">; (X 10)</span></a>
<a class="sourceLine" id="cb17-8" title="8"></a>
<a class="sourceLine" id="cb17-9" title="9">(<span class="kw">assoc</span> &#39;ringo &#39;((mick jagger) (keith richards) (brian jones)</a>
<a class="sourceLine" id="cb17-10" title="10">                (charlie watts) (bill wyman)))</a>
<a class="sourceLine" id="cb17-11" title="11"><span class="co">; #F</span></a></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb18-1" title="1">(<span class="ex">define</span><span class="fu"> dictionary</span></a>
<a class="sourceLine" id="cb18-2" title="2">&#39;((window fenetre) (book livre) (computer ordinateur)</a>
<a class="sourceLine" id="cb18-3" title="3">  (house maison) (closed ferme) (pate pate) (liver foie)</a>
<a class="sourceLine" id="cb18-4" title="4">  (faith foi) (weekend (fin de semaine))</a>
<a class="sourceLine" id="cb18-5" title="5">  ((practical joke) attrape) (pal copain)))</a>
<a class="sourceLine" id="cb18-6" title="6"></a>
<a class="sourceLine" id="cb18-7" title="7">(<span class="ex">define</span><span class="fu"> </span>(translate wd)</a>
<a class="sourceLine" id="cb18-8" title="8">  (<span class="kw">let</span> ((record (<span class="kw">assoc</span> wd dictionary)))</a>
<a class="sourceLine" id="cb18-9" title="9">    (<span class="kw">if</span> record</a>
<a class="sourceLine" id="cb18-10" title="10">        (<span class="kw">cadr</span> record)</a>
<a class="sourceLine" id="cb18-11" title="11">        &#39;(parlez-vous anglais?))))</a></code></pre></div>
<p><code>assoc</code> returns <code>#f</code> if it can’t find the entry you’re looking for in your association list.</p>
<hr />
<h3 id="functions-that-take-variable-numbers-of-arguments">Functions That Take Variable Numbers of Arguments</h3>
<p><strong>How to use dot <code>.</code> to represent any number of arguments?</strong></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb19-1" title="1">(<span class="ex">define</span><span class="fu"> </span>(increasing? number . rest-of-numbers)</a>
<a class="sourceLine" id="cb19-2" title="2">  (<span class="kw">cond</span> ((<span class="kw">null?</span> rest-of-numbers) <span class="dv">#t</span>)</a>
<a class="sourceLine" id="cb19-3" title="3">        ((<span class="op">&gt;</span> (<span class="kw">car</span> rest-of-numbers) number)</a>
<a class="sourceLine" id="cb19-4" title="4">         (apply increasing? rest-of-numbers))</a>
<a class="sourceLine" id="cb19-5" title="5">        (<span class="kw">else</span> <span class="dv">#f</span>)))</a>
<a class="sourceLine" id="cb19-6" title="6"></a>
<a class="sourceLine" id="cb19-7" title="7">(increasing? <span class="dv">4</span> <span class="dv">12</span> <span class="dv">82</span>)</a>
<a class="sourceLine" id="cb19-8" title="8"><span class="co">; #T</span></a>
<a class="sourceLine" id="cb19-9" title="9"></a>
<a class="sourceLine" id="cb19-10" title="10">(increasing? <span class="dv">12</span> <span class="dv">4</span> <span class="dv">82</span> <span class="dv">107</span>)</a>
<a class="sourceLine" id="cb19-11" title="11"><span class="co">; #F</span></a></code></pre></div>
<p>In listing the formal parameters of a procedure, you can <em>use a dot just before the last parameter to mean that that parameter ( rest-of-numbers in this case) represents any number of arguments, including zero. The value that will be associated with this parameter when the procedure is invoked will be a list whose elements are the actual argument values.</em></p>
<p><em>The number of formal parameters before the dot determines the minimum number of arguments that must be used when your procedure is invoked. There can be only one formal parameter after the dot.</em></p>
<p><strong>How does procedure <code>apply</code> work?</strong></p>
<p><code>apply</code> takes two arguments, a procedure and a list. Apply invokes the given procedure with the elements of the given list as its arguments, and returns whatever value the procedure returns. Therefore, the following two expressions are equivalent:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb20-1" title="1">(<span class="op">+</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb20-2" title="2"></a>
<a class="sourceLine" id="cb20-3" title="3">(apply <span class="op">+</span> &#39;(<span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>))</a></code></pre></div>
<p><strong>What is a rest parameter?</strong></p>
<p>A parameter that follows a dot and therefore represents a variable number of arguments is called a <em>rest parameter</em>.</p>
<hr />
<h3 id="recursion-on-arbitrary-structured-lists">Recursion on Arbitrary Structured Lists</h3>
<p><strong>If the entire book is stored in a list structure. How to define a function to lookup how many times a word apears in the book?</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb21-1" title="1">(<span class="ex">define</span><span class="fu"> </span>(deep-appearances wd structure)     <span class="co">; higher-order version</span></a>
<a class="sourceLine" id="cb21-2" title="2">  (<span class="kw">if</span> (word? structure)</a>
<a class="sourceLine" id="cb21-3" title="3">  (<span class="kw">if</span> (<span class="kw">equal?</span> structure wd) <span class="dv">1</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb21-4" title="4">  (reduce <span class="op">+</span></a>
<a class="sourceLine" id="cb21-5" title="5">          (map (<span class="kw">lambda</span> (sublist) (deep-appearances wd sublist))</a>
<a class="sourceLine" id="cb21-6" title="6">               structure))))</a></code></pre></div>
<p><strong>How to define <code>deep-appearances</code> without higher-order procedures?</strong></p>
<p>We deal with the base case—words—just as before. But for lists we do what we often do in trying to simplify a list problem: We divide the list into its first element (its <code>car</code>) and all the rest of its elements (its <code>cdr</code>).</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb22-1" title="1">(<span class="ex">define</span><span class="fu"> </span>(deep-appearances wd structure)    <span class="co">; compact-version</span></a>
<a class="sourceLine" id="cb22-2" title="2">  (<span class="kw">cond</span> ((<span class="kw">equal?</span> wd structure) <span class="dv">1</span>)          <span class="co">; base case: desired word</span></a>
<a class="sourceLine" id="cb22-3" title="3">        ((word? structure) <span class="dv">0</span>)              <span class="co">; base case: other word</span></a>
<a class="sourceLine" id="cb22-4" title="4">        ((<span class="kw">null?</span> structure) <span class="dv">0</span>)              <span class="co">; base case: empty list</span></a>
<a class="sourceLine" id="cb22-5" title="5">        (<span class="kw">else</span> (<span class="op">+</span> (deep-appearances wd (<span class="kw">car</span> structure))</a>
<a class="sourceLine" id="cb22-6" title="6">                 (deep-appearances wd (<span class="kw">cdr</span> structure))))))</a></code></pre></div>
<p><strong>In <code>deep-appearances</code> the desired result is a single number. What if we want to build a new list-of-lists structure? Having used <code>car</code> and <code>cdr</code> to disassemble a structure, we can use <code>cons</code> to build a new one.</strong></p>
<p>For example, we’ll translate our entire book into Pig Latin:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb23-1" title="1">(<span class="ex">define</span><span class="fu"> </span>(deep-pigl structure)</a>
<a class="sourceLine" id="cb23-2" title="2">  (<span class="kw">cond</span> ((word? structure) (pigl structure))</a>
<a class="sourceLine" id="cb23-3" title="3">        ((<span class="kw">null?</span> structure) &#39;())</a>
<a class="sourceLine" id="cb23-4" title="4">        (<span class="kw">else</span> (<span class="kw">cons</span> (deep-pigl (<span class="kw">car</span> structure))</a>
<a class="sourceLine" id="cb23-5" title="5">                    (deep-pigl (<span class="kw">cdr</span> structure))))))</a></code></pre></div>
<p>Compare <code>deep-pigl</code> with an every-pattern list recursion such as <code>praise</code> on page 285. Both look like</p>
<p><code>(cons ( something (car argument)) ( something (cdr argument)))</code></p>
<p>And yet these procedures are profoundly different. <code>praise</code> is a simple left-to-right walk through the elements of a sequence; <code>deep-pigl</code> dives in and out of sublists. The difference is a result of the fact that <code>praise</code> does one recursive call, for the <code>cdr</code> , while <code>deep-pigl</code> does two, for the <code>car</code> as well as the <code>cdr</code>. The pattern exhibited by <code>deep-pigl</code> is called <code>car-cdr</code> recursion. (Another name for it is “tree recursion,” for a reason we’ll see in the next chapter.)</p>
<hr />
<h3 id="pitfalls">Pitfalls</h3>
<ul>
<li><p>Just as we mentioned about the names <code>word</code> and <code>sentence</code> , resist the temptation to use <code>list</code> as a formal parameter. We use <code>lst</code> instead, but other alternatives are capital <code>L</code> or <code>seq</code> (for “sequence”).</p></li>
<li><p>The list constructor <code>cons</code> does not treat its two arguments equivalently. The second one must be the list you’re trying to extend. There is no equally easy way to extend a list on the right (although you can put the new element into a one-element list and use <code>append</code> ). If you get the arguments backward, you’re likely to get funny-looking results that aren’t lists, such as</p></li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb24-1" title="1">((<span class="dv">3</span> . <span class="dv">2</span>) . <span class="dv">1</span>)</a></code></pre></div>
<p>The result you get when you <code>cons</code> onto something that isn’t a list is called a <em>pair</em>. It’s sometimes called a “dotted pair” because of what it looks like when printed:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb25-1" title="1">(<span class="kw">cons</span> &#39;a &#39;b)</a>
<a class="sourceLine" id="cb25-2" title="2"><span class="co">; (A . B)</span></a></code></pre></div>
<p>It’s just the printed representation that’s dotted, however; the dot isn’t part of the pair any more than the parentheses around a list are elements of the list. Lists are made of pairs; that’s why <code>cons</code> can construct lists. But we’re not going to talk about any pairs that aren’t part of lists, so you don’t have to think about them at all, except to know that if dots appear in your results you’re consing backward.</p>
<ul>
<li><p>Don’t get confused between lists and sentences. Sentences have no internal structure; the good aspect of this is that it’s hard to make mistakes about building the structure, but the bad aspect is that you might need such a structure. You can have lists whose elements are sentences, but it’s confusing if you think of the same structure sometimes as a list and sometimes as a sentence.</p></li>
<li><p>In reading someone else’s program, it’s easy not to notice that a procedure is making two recursive calls instead of just one. If you notice only the recursive call for the <code>cdr</code>, you might think you’re looking at a sequential recursion.</p></li>
<li><p>If you’re writing a procedure whose argument is a list-of-lists, it may feel funny to let it also accept a word as the argument value. People therefore sometimes insist on a list as the argument, leading to an overly complicated base case. If your base case test says</p></li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb26-1" title="1">(word? (<span class="kw">car</span> structure))</a></code></pre></div>
<p>then think about whether you’d have a better-organized program if the base case were</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode scheme"><code class="sourceCode scheme"><a class="sourceLine" id="cb27-1" title="1">(word? structure)</a></code></pre></div>
<ul>
<li>Remember that in a deep-structure recursion you may need two base cases, one for reaching an elementRemember that in a deep-structure recursion you may need two base cases, one for reaching an element that isn’t a sublist, and the other for an empty list, with no elements at all. (Our deep-appearances procedure is an example.) Don’t forget the empty-list case. that isn’t a sublist, and the other for an empty list, with no elements at all. (Our deep-appearances procedure is an example.) Don’t forget the empty-list case.</li>
</ul>
<hr />
<p><strong>Exercises 17.1-17.3</strong></p>
<p><strong>Exercises 17.4-17.16</strong></p>
</body>
</html>
